<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>简单的词法分析和语法分析（C++实现，CodeBlocks+GCC编译） | maxuewei2</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">简单的词法分析和语法分析（C++实现，CodeBlocks+GCC编译）</h1><a id="logo" href="/.">maxuewei2</a><p class="description">Xlc Love Coding</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/guestbook/"><i class="fa book"> 留言</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">简单的词法分析和语法分析（C++实现，CodeBlocks+GCC编译）</h1><div class="post-meta">Jul 13, 2016<span> | </span><span class="category"><a href="/categories/学习/">学习</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h3 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h3><p>　　分析的语言是SNL语言，详见《编译程序的设计与实现》（ 刘磊、金英、张晶、张荷花、单郸编著）</p>
<p>　　词法分析就是实现了词法分析的自动机</p>
<p>　　语法分析使用递归下降法</p>
<h3 id="运行结果："><a href="#运行结果：" class="headerlink" title="运行结果："></a>运行结果：</h3><p>　　词法分析 得到TokenList</p>
<p>　　语法分析 输出语法树</p>
<p>　　</p>
<h4 id="运行输出："><a href="#运行输出：" class="headerlink" title="运行输出："></a>运行输出：</h4><p><img src="/imgs/cifafenxi.png" alt="shuchu"></p>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><p>main.cpp<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUMOFRESERVED 22</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUMOFSYMBOLS 20</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> RES 0</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ID 1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 2</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SYM 3</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> STR 4</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PLUS 100</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SUB 101</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MUL 102</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> DIV 103</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LT 104</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LBRACK 105</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> RBRACK 106</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LSQUBRACK 107</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> RSQUBRACK 108</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> POINT 109</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SEMI 110</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LBRACE 111</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> RBRACE 112</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EOFF 113</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BLANK 114</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> QUO 115</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> EQU 116</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INDEX 117</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ASSI 118</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COM 119</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> uint unsigned</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> Token &#123;</div><div class="line">    <span class="keyword">int</span> id;</div><div class="line">    <span class="keyword">int</span> ptr;</div><div class="line">    <span class="keyword">int</span> linenum;</div><div class="line">&#125; Token;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> Node &#123;</div><div class="line">    <span class="keyword">char</span> *desc;</div><div class="line">    <span class="built_in">vector</span>&lt;Node*&gt; children;</div><div class="line">    Node(<span class="keyword">const</span> <span class="keyword">char</span>* str) &#123;</div><div class="line">        desc=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">30</span>];</div><div class="line">        <span class="built_in">strcpy</span>(desc,str);</div><div class="line">    &#125;</div><div class="line">&#125; Node;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;Token&gt;* tokens;</div><div class="line"><span class="keyword">int</span> Token_n=<span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span>* reserved_words[NUMOFRESERVED]= &#123;<span class="string">"begin"</span>,<span class="string">"end"</span>,<span class="string">"program"</span>,<span class="string">"var"</span>,</div><div class="line">                                            <span class="string">"type"</span>,<span class="string">"procedure"</span>,<span class="string">"while"</span>,<span class="string">"endwh"</span>,</div><div class="line">                                            <span class="string">"integer"</span>,<span class="string">"char"</span>,<span class="string">"array"</span>,<span class="string">"of"</span>,</div><div class="line">                                            <span class="string">"intc"</span>,<span class="string">"record"</span>,<span class="string">"if"</span>,<span class="string">"then"</span>,</div><div class="line">                                            <span class="string">"else"</span>,<span class="string">"fi"</span>,<span class="string">"do"</span>,<span class="string">"write"</span>,</div><div class="line">                                            <span class="string">"read"</span>,<span class="string">"return"</span></div><div class="line">                                           &#125;;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span>* symbol_table[NUMOFSYMBOLS]= &#123;<span class="string">"+"</span>,<span class="string">"-"</span>,<span class="string">"*"</span>,<span class="string">"/"</span>,<span class="string">"&lt;"</span>,</div><div class="line">                                                <span class="string">"("</span>,<span class="string">")"</span>,<span class="string">"["</span>,<span class="string">"]"</span>,<span class="string">"."</span>,</div><div class="line">                                                <span class="string">";"</span>,<span class="string">"&#123;"</span>,<span class="string">"&#125;"</span>,<span class="string">"EOF"</span>,<span class="string">"BLANK"</span>,</div><div class="line">                                                <span class="string">"\'"</span>,<span class="string">"="</span>,<span class="string">".."</span>,<span class="string">":="</span>,<span class="string">","</span></div><div class="line">                                               &#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">syntaxError</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* message)</span></span>;</div><div class="line"><span class="function">Node* <span class="title">MatchRES</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* expected)</span></span>;</div><div class="line"><span class="function">Node* <span class="title">MatchSYM</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> expected)</span></span>;</div><div class="line"><span class="function">Node* <span class="title">MatchID</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">MatchNUM</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isRES</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* res)</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isSYM</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> res)</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isID</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isNUM</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isLineEnd</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Program</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProgramHead</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">DeclarePart</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeDec</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeDeclaration</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeDecList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeDecMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeId</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">TypeName</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">BaseType</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">StructureType</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ArrayType</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">RecType</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FieldDecList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FieldDecMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">IdList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">IdMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarDec</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarDeclaration</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarDecList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarDecMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarIdList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VarIdMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProcDec</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProcDeclaration</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ParamList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ParamDecList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ParamMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Param</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FormList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FidMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProcDecPart</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProcBody</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ProgramBody</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">StmList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">StmMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Stm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">AssCall</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">AssignmentRest</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ConditionalStm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">LoopStm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">InputStm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">OutputStm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ReturnStm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">CallStmRest</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ActParamList</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">ActParamMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Exp</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Term</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">OtherFactor</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">OtherTerm</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Factor</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Variable</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">VariMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FieldVar</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">FieldVarMore</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">Parse</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">CmpOp</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">AddOp</span><span class="params">()</span></span>;</div><div class="line"><span class="function">Node* <span class="title">MultOp</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_tree</span><span class="params">(Node* root,<span class="keyword">int</span> depth,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;* v,<span class="keyword">bool</span> islast)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="built_in">vector</span>&lt;Node* &gt;&amp; children,Node* node)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(node!=<span class="literal">NULL</span>) &#123;</div><div class="line">        children.push_back(node);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COMMENT_ERROR -1000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> STR_ERROR -1001</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SYM_ERROR -1002</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NOT_REC_SYMBOL -1003</span></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>*&gt; ID_table;</div><div class="line"><span class="built_in">vector</span>&lt;uint&gt; NUM_table;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>*&gt; STR_table;</div><div class="line"><span class="keyword">int</span> ID_n=<span class="number">0</span>,NUM_n=<span class="number">0</span>,STR_n=<span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> num_of_lines=<span class="number">1</span>;</div><div class="line">FILE * file;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/***************************************************************************************/</span></div><div class="line"><span class="comment">/*****************                   词法分析                          *****************/</span></div><div class="line"><span class="comment">/***************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">handle_error</span><span class="params">(<span class="keyword">int</span> error_num,<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"行号:%d \t"</span>,num_of_lines);</div><div class="line">    <span class="keyword">switch</span>(error_num) &#123;</div><div class="line">    <span class="keyword">case</span> COMMENT_ERROR:</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"注释未结束 \t"</span>);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> SYM_ERROR:</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"出现未定义的符号，您想输入的是\":=\"吗? \t"</span>);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> STR_ERROR:</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"字符串未结束 \t"</span>);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> NOT_REC_SYMBOL:</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"出现未定义的符号 \t"</span>);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,str);</div><div class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">char</span> <span class="title">getNextChar</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">char</span> c;</div><div class="line">    c=fgetc(file);</div><div class="line">    <span class="keyword">return</span> c;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ungetNextChar</span><span class="params">()</span> </span>&#123;</div><div class="line">    fseek(file,<span class="number">-1</span>,SEEK_CUR);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">reservedLookup</span><span class="params">(<span class="keyword">char</span>* str)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;NUMOFRESERVED; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(str,reserved_words[i])==<span class="number">0</span>)<span class="keyword">return</span> i;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">str_to_num</span><span class="params">(<span class="keyword">char</span>* str)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> len=<span class="built_in">strlen</span>(str);</div><div class="line">    <span class="keyword">int</span> n=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</div><div class="line">        n=n*<span class="number">10</span>+str[i]-<span class="string">'0'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> n;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">addIDTable</span><span class="params">(<span class="keyword">char</span>* str)</span> </span>&#123;</div><div class="line">    ID_table.push_back(str);</div><div class="line">    <span class="keyword">return</span> ID_n++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">addNUMTable</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</div><div class="line">    NUM_table.push_back(num);</div><div class="line">    <span class="keyword">return</span> NUM_n++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">addSTRTable</span><span class="params">(<span class="keyword">char</span>* str )</span> </span>&#123;</div><div class="line">    STR_table.push_back(str);</div><div class="line">    <span class="keyword">return</span> STR_n++;</div><div class="line">&#125;</div><div class="line"><span class="function">Token <span class="title">scan</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> symbols[<span class="number">12</span>]= &#123;<span class="string">'+'</span>,<span class="string">'-'</span>,<span class="string">'*'</span>,<span class="string">'/'</span>,<span class="string">'&lt;'</span>,<span class="string">'('</span>,<span class="string">')'</span>,<span class="string">'['</span>,<span class="string">']'</span>,<span class="string">';'</span>,<span class="string">'='</span>,<span class="string">','</span>&#125;;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> symbols_n[<span class="number">12</span>]= &#123;PLUS,SUB,MUL,DIV,LT,LBRACK,RBRACK,LSQUBRACK,RSQUBRACK,SEMI,EQU,COM&#125;;</div><div class="line">    Token t;</div><div class="line">    t.linenum=num_of_lines;</div><div class="line">    <span class="keyword">char</span>* str=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">256</span>];</div><div class="line">    <span class="built_in">strcpy</span>(str,<span class="string">""</span>);<span class="comment">//字符串要初始化，不然有乱码</span></div><div class="line">    <span class="keyword">char</span> c[<span class="number">2</span>]= &#123;<span class="string">'a'</span>,<span class="string">'\0'</span>&#125;;</div><div class="line">    c[<span class="number">0</span>]=getNextChar();</div><div class="line">LS0:</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'a'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'z'</span>)<span class="keyword">goto</span> LS1;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'A'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'Z'</span>)<span class="keyword">goto</span> LS1;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'0'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'9'</span>)<span class="keyword">goto</span> LS2;</div><div class="line">    <span class="keyword">int</span> indexofsym;</div><div class="line">    <span class="keyword">for</span>(indexofsym=<span class="number">0</span>; indexofsym&lt;<span class="number">12</span>; indexofsym++) &#123;</div><div class="line">        <span class="keyword">if</span>(c[<span class="number">0</span>]==symbols[indexofsym]) &#123;</div><div class="line">            <span class="keyword">goto</span> LS3;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'.'</span>)<span class="keyword">goto</span> LS4;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'&#123;'</span>)<span class="keyword">goto</span> LS5;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">':'</span>)<span class="keyword">goto</span> LS6;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'\''</span>)<span class="keyword">goto</span> LS7;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'\n'</span>)<span class="keyword">goto</span> LS8;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==EOF)<span class="keyword">goto</span> LS9;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'\t'</span>||c[<span class="number">0</span>]==<span class="string">' '</span>)<span class="keyword">goto</span> LS10;</div><div class="line">    <span class="keyword">goto</span> OTHER;</div><div class="line">LS1:</div><div class="line">    <span class="built_in">strcat</span>(str,c);</div><div class="line">    c[<span class="number">0</span>]=getNextChar();</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'a'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'z'</span>)<span class="keyword">goto</span> LS1;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'A'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'Z'</span>)<span class="keyword">goto</span> LS1;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'0'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'9'</span>)<span class="keyword">goto</span> LS1;</div><div class="line">    ungetNextChar();</div><div class="line">    <span class="keyword">int</span> nres;</div><div class="line">    <span class="keyword">if</span>(nres=reservedLookup(str),nres!=<span class="number">-1</span>) &#123;</div><div class="line">        t.id=RES;</div><div class="line">        t.ptr=nres;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        t.id=ID;</div><div class="line">        t.ptr=addIDTable(str);</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">LS2:</div><div class="line">    <span class="built_in">strcat</span>(str,c);</div><div class="line">    c[<span class="number">0</span>]=getNextChar();</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]&gt;=<span class="string">'0'</span>&amp;&amp;c[<span class="number">0</span>]&lt;=<span class="string">'9'</span>)<span class="keyword">goto</span> LS2;</div><div class="line">    ungetNextChar();</div><div class="line">    t.id=NUM;</div><div class="line">    t.ptr=addNUMTable(str_to_num(str));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">LS3:</div><div class="line">    t.ptr=symbols_n[indexofsym];</div><div class="line">    t.id=SYM;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">LS4:</div><div class="line">    <span class="built_in">strcat</span>(str,c);</div><div class="line">    c[<span class="number">0</span>]=getNextChar();</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'.'</span>) &#123;</div><div class="line">        t.id=SYM;</div><div class="line">        t.ptr=INDEX;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        t.id=SYM;</div><div class="line">        t.ptr=POINT;</div><div class="line">        ungetNextChar();</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">LS5:</div><div class="line">    <span class="keyword">while</span>(c[<span class="number">0</span>]=getNextChar(),c[<span class="number">0</span>]!=EOF&amp;&amp;c[<span class="number">0</span>]!=<span class="string">'&#125;'</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'\n'</span>||c[<span class="number">0</span>]==<span class="string">'\r'</span>)num_of_lines++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'&#125;'</span>) &#123;</div><div class="line">        c[<span class="number">0</span>]=getNextChar();</div><div class="line">        <span class="keyword">goto</span> LS0;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        handle_error(COMMENT_ERROR,<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">LS6:</div><div class="line">    <span class="built_in">strcat</span>(str,c);</div><div class="line">    c[<span class="number">0</span>]=getNextChar();</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'='</span>) &#123;</div><div class="line">        t.id=SYM;</div><div class="line">        t.ptr=ASSI;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        handle_error(SYM_ERROR,<span class="string">"符号为 \':\'"</span>);</div><div class="line">    &#125;</div><div class="line">LS7:</div><div class="line">    <span class="keyword">while</span>(c[<span class="number">0</span>]=getNextChar(),c[<span class="number">0</span>]!=EOF&amp;&amp;c[<span class="number">0</span>]!=<span class="string">'\''</span>) &#123;</div><div class="line">        <span class="built_in">strcat</span>(str,c);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'\''</span>) &#123;</div><div class="line">        t.id=STR;</div><div class="line">        t.ptr=addSTRTable(str);</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        handle_error(STR_ERROR,<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">LS8:</div><div class="line">    t.id=<span class="number">-1</span>;</div><div class="line">    num_of_lines++;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">LS9:</div><div class="line">    t.id=SYM;</div><div class="line">    t.ptr=EOFF;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">LS10:</div><div class="line">    t.id=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">OTHER:</div><div class="line">    handle_error(NOT_REC_SYMBOL,c);</div><div class="line">    t.id=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_token</span><span class="params">(Token t)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(t.id==STR) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"&lt;%d %s %s&gt; \n"</span>,t.linenum,<span class="string">"STR"</span>,STR_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==NUM) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"&lt;%d %s %d&gt; \n"</span>,t.linenum,<span class="string">"NUM"</span>,NUM_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==ID) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"&lt;%d %s %s&gt; \n"</span>,t.linenum,<span class="string">"ID"</span>,ID_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==RES) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"&lt;%d %s %s&gt; \n"</span>,t.linenum,<span class="string">"RES"</span>,reserved_words[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==SYM) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"&lt;%d %s %s&gt; \n"</span>,t.linenum,<span class="string">"SYM"</span>,symbol_table[t.ptr<span class="number">-100</span>]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="built_in">vector</span>&lt;Token&gt;*  getTokenlist(<span class="keyword">const</span> <span class="keyword">char</span>* filename) &#123;</div><div class="line">    tokens-&gt;clear();</div><div class="line">    file=fopen(filename,<span class="string">"r"</span>);</div><div class="line">    Token temp;</div><div class="line">    <span class="keyword">while</span>(temp=scan(),!(temp.id==SYM&amp;&amp;temp.ptr==EOFF)) &#123;</div><div class="line">        <span class="keyword">if</span>(temp.id!=<span class="number">-1</span>) &#123;</div><div class="line">            tokens-&gt;push_back(temp);</div><div class="line">            <span class="keyword">if</span>(temp.id==RES&amp;&amp;<span class="built_in">strcmp</span>(<span class="string">"end"</span>,reserved_words[temp.ptr])==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">char</span> c;</div><div class="line">                <span class="keyword">if</span>(c=getNextChar(),c==<span class="string">'.'</span>) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    ungetNextChar();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    fclose(file);</div><div class="line">    <span class="keyword">return</span> tokens;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_Token_list</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> len=tokens-&gt;size();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</div><div class="line">        show_token(tokens-&gt;at(i));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">write_token</span><span class="params">(FILE* file,Token t)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(t.id==STR) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(file,<span class="string">"&lt;%s %s&gt; \n"</span>,<span class="string">"STR"</span>,STR_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==NUM) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(file,<span class="string">"&lt;%s %d&gt; \n"</span>,<span class="string">"NUM"</span>,NUM_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==ID) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(file,<span class="string">"&lt;%s %s&gt; \n"</span>,<span class="string">"ID"</span>,ID_table[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==RES) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(file,<span class="string">"&lt;%s %s&gt; \n"</span>,<span class="string">"RES"</span>,reserved_words[t.ptr]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(t.id==SYM) &#123;</div><div class="line">        <span class="built_in">fprintf</span>(file,<span class="string">"&lt;%s %s&gt; \n"</span>,<span class="string">"SYM"</span>,symbol_table[t.ptr<span class="number">-100</span>]);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">save_Token_list</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* filename)</span> </span>&#123;</div><div class="line">    FILE* f=fopen(filename,<span class="string">"w"</span>);</div><div class="line">    <span class="keyword">int</span> len=tokens-&gt;size();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</div><div class="line">        write_token(f,tokens-&gt;at(i));</div><div class="line">    &#125;</div><div class="line">    fclose(f);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/***************************************************************************************/</span></div><div class="line"><span class="comment">/*****************                   语法分析                          *****************/</span></div><div class="line"><span class="comment">/***************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">syntaxError</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* message)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(message,<span class="string">"outofrange"</span>)==<span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"出现越界错误"</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"   Token_n:%d    tokens-&gt;size:%d\n"</span>,Token_n,tokens-&gt;size());</div><div class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"行号：%d    %s"</span>,tokens-&gt;at(Token_n).linenum,message);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"当前token："</span>);</div><div class="line">    show_token(tokens-&gt;at(Token_n));</div><div class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MatchRES</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* expected)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id,ptr=tokens-&gt;at(Token_n).ptr;</div><div class="line">    <span class="keyword">if</span>(id==RES&amp;&amp;<span class="built_in">strcmp</span>(expected,reserved_words[ptr])==<span class="number">0</span>) &#123;</div><div class="line">        Node*t =<span class="keyword">new</span> Node(expected);</div><div class="line">        Token_n++;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">char</span>* message=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>];</div><div class="line">    <span class="built_in">strcpy</span>(message,<span class="string">"match res error.\nexpect: "</span>);</div><div class="line">    <span class="built_in">strcat</span>(message,expected);</div><div class="line">    <span class="built_in">strcat</span>(message,<span class="string">"\n"</span>);</div><div class="line">    syntaxError(message);</div><div class="line">    <span class="keyword">delete</span> message;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MatchNUM</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==NUM) &#123;</div><div class="line">        Node* t= <span class="keyword">new</span> Node(<span class="string">"NUM"</span>);</div><div class="line">        Token_n++;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"match num error\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MatchSTR</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==STR) &#123;</div><div class="line">        Node* t= <span class="keyword">new</span> Node(<span class="string">"STR"</span>);</div><div class="line">        Token_n++;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"match str error\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MatchID</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==ID) &#123;</div><div class="line">        Node* t =<span class="keyword">new</span> Node(<span class="string">"ID"</span>);</div><div class="line">        Token_n++;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"match id error\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MatchSYM</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> expected)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id,ptr=tokens-&gt;at(Token_n).ptr;</div><div class="line">    <span class="keyword">if</span>(id==SYM&amp;&amp;ptr==expected) &#123;</div><div class="line">        Node* t =<span class="keyword">new</span> Node(symbol_table[ptr<span class="number">-100</span>]);</div><div class="line">        Token_n++;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">char</span>* message=<span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>];</div><div class="line">    <span class="built_in">strcpy</span>(message,<span class="string">"match symbol error.\nexpect: "</span>);</div><div class="line">    <span class="built_in">strcat</span>(message,symbol_table[expected<span class="number">-100</span>]);</div><div class="line">    <span class="built_in">strcat</span>(message,<span class="string">"\n"</span>);</div><div class="line">    syntaxError(message);</div><div class="line">    <span class="keyword">delete</span> message;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isRES</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* res)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id,ptr=tokens-&gt;at(Token_n).ptr;</div><div class="line">    <span class="keyword">if</span>(id==RES&amp;&amp;<span class="built_in">strcmp</span>(reserved_words[ptr],res)==<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isSYM</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> res)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id,ptr=tokens-&gt;at(Token_n).ptr;</div><div class="line">    <span class="keyword">if</span>(id==SYM&amp;&amp;ptr==res)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isID</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==ID)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isNUM</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==NUM)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isSTR</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(Token_n&gt;=(<span class="keyword">int</span>)tokens-&gt;size())syntaxError(<span class="string">"outofrange"</span>);</div><div class="line">    <span class="keyword">int</span> id=tokens-&gt;at(Token_n).id;</div><div class="line">    <span class="keyword">if</span>(id==STR)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Program</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Program"</span>);</div><div class="line">    add(t-&gt;children,ProgramHead());</div><div class="line">    add(t-&gt;children,DeclarePart());</div><div class="line">    add(t-&gt;children,ProgramBody());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProgramHead</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ProgramHead"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"program"</span>));</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">Node* <span class="title">DeclarePart</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"DeclarePart"</span>);</div><div class="line">    add(t-&gt;children,TypeDeclaration());</div><div class="line">    add(t-&gt;children,VarDeclaration());</div><div class="line">    add(t-&gt;children,ProcDeclaration());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeDec</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"TypeDec"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"type"</span>));</div><div class="line">    add(t-&gt;children,TypeDecList());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeDeclaration</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"type"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"TypeDeclaration"</span>);</div><div class="line">        add(t-&gt;children,TypeDec());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeDecList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"TypeDecList"</span>);</div><div class="line">    add(t-&gt;children,TypeId());</div><div class="line">    add(t-&gt;children,MatchSYM(EQU));</div><div class="line">    add(t-&gt;children,TypeName());</div><div class="line">    add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">    add(t-&gt;children,TypeDecMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeDecMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isID()) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"TypeDecMore"</span>);</div><div class="line">        add(t-&gt;children,TypeDecList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeId</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"TypeId"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">TypeName</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"TypeName"</span>);</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)) &#123;</div><div class="line">        add(t-&gt;children,BaseType());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"array"</span>)||isRES(<span class="string">"record"</span>)) &#123;</div><div class="line">        add(t-&gt;children,StructureType());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">BaseType</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"BaseType"</span>);</div><div class="line">        add(t-&gt;children,MatchRES(<span class="string">"integer"</span>));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"char"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"BaseType"</span>);</div><div class="line">        add(t-&gt;children,MatchRES(<span class="string">"char"</span>));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"not a base type\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">StructureType</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"array"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"StructureType"</span>);</div><div class="line">        add(t-&gt;children,ArrayType());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"record"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"StructureType"</span>);</div><div class="line">        add(t-&gt;children,RecType());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ArrayType</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ArrayType"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"array"</span>));</div><div class="line">    add(t-&gt;children,MatchSYM(LSQUBRACK));</div><div class="line">    add(t-&gt;children,MatchNUM());</div><div class="line">    add(t-&gt;children,MatchSYM(INDEX));</div><div class="line">    add(t-&gt;children,MatchNUM());</div><div class="line">    add(t-&gt;children,MatchSYM(RSQUBRACK));</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"of"</span>));</div><div class="line">    add(t-&gt;children,BaseType());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">RecType</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"RecType"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"record"</span>));</div><div class="line">    add(t-&gt;children,FieldDecList());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"end"</span>));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FieldDecList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"FieldDecList"</span>);</div><div class="line">        add(t-&gt;children,BaseType());</div><div class="line">        add(t-&gt;children,IdList());</div><div class="line">        add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">        add(t-&gt;children,FieldDecMore());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"array"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"FieldDecList"</span>);</div><div class="line">        add(t-&gt;children,ArrayType());</div><div class="line">        add(t-&gt;children,IdList());</div><div class="line">        add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">        add(t-&gt;children,FieldDecMore());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"field declare list error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FieldDecMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)||isRES(<span class="string">"array"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"FieldDecMore"</span>);</div><div class="line">        add(t-&gt;children,FieldDecList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">IdList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"IdList"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,IdMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">IdMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(COM)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"IdMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(COM));</div><div class="line">        add(t-&gt;children,IdList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarDec</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"VarDec"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"var"</span>));</div><div class="line">    add(t-&gt;children,VarDecList());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarDeclaration</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"var"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"VarDeclaration"</span>);</div><div class="line">        add(t-&gt;children,VarDec());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarDecList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"VarDecList"</span>);</div><div class="line">    add(t-&gt;children,TypeName());</div><div class="line">    add(t-&gt;children,VarIdList());</div><div class="line">    add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">    add(t-&gt;children,VarDecMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarDecMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)||isRES(<span class="string">"array"</span>)||isRES(<span class="string">"record"</span>)||isID()) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"VarDecMore"</span>);</div><div class="line">        add(t-&gt;children,VarDecList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarIdList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"VarIdList"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,VarIdMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VarIdMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(COM)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"VarIdMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(COM));</div><div class="line">        add(t-&gt;children,VarIdList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProcDec</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ProcDec"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"procedure"</span>));</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,MatchSYM(LBRACK));</div><div class="line">    add(t-&gt;children,ParamList());</div><div class="line">    add(t-&gt;children,MatchSYM(RBRACK));</div><div class="line">    add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">    add(t-&gt;children,DeclarePart());</div><div class="line">    add(t-&gt;children,ProcBody());</div><div class="line">    add(t-&gt;children,ProcDeclaration());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProcDeclaration</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"procedure"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"ProcDeclaration"</span>);</div><div class="line">        add(t-&gt;children,ProcDec());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ParamList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)||isRES(<span class="string">"array"</span>)||isRES(<span class="string">"record"</span>)||isID()||isRES(<span class="string">"var"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"ParamList"</span>);</div><div class="line">        add(t-&gt;children,ParamDecList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ParamDecList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ParamDecList"</span>);</div><div class="line">    add(t-&gt;children,Param());</div><div class="line">    add(t-&gt;children,ParamMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ParamMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(SEMI)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"ParamMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">        add(t-&gt;children,ParamDecList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Param</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"integer"</span>)||isRES(<span class="string">"char"</span>)||isRES(<span class="string">"array"</span>)||isRES(<span class="string">"record"</span>)||isID()) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"Param"</span>);</div><div class="line">        add(t-&gt;children,TypeName());</div><div class="line">        add(t-&gt;children,FormList());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"var"</span>)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"Param"</span>);</div><div class="line">        add(t-&gt;children,MatchRES(<span class="string">"var"</span>));</div><div class="line">        add(t-&gt;children,TypeName());</div><div class="line">        add(t-&gt;children,FormList());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"param error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FormList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"FormList"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,FidMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FidMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(COM)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"FidMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(COM));</div><div class="line">        add(t-&gt;children,FormList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProcDecPart</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ProcDecPart"</span>);</div><div class="line">    add(t-&gt;children,DeclarePart());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProcBody</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ProcBody"</span>);</div><div class="line">    add(t-&gt;children,ProgramBody());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ProgramBody</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ProgramBody"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"begin"</span>));</div><div class="line">    add(t-&gt;children,StmList());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"end"</span>));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">StmList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"StmList"</span>);</div><div class="line">    add(t-&gt;children,Stm());</div><div class="line">    add(t-&gt;children,StmMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">StmMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(SEMI)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"StmMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(SEMI));</div><div class="line">        add(t-&gt;children,StmList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Stm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Stm"</span>);</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"if"</span>)) &#123;</div><div class="line">        add(t-&gt;children,ConditionalStm());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"while"</span>)) &#123;</div><div class="line">        add(t-&gt;children,LoopStm());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"read"</span>)) &#123;</div><div class="line">        add(t-&gt;children,InputStm());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"write"</span>)) &#123;</div><div class="line">        add(t-&gt;children,OutputStm());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isRES(<span class="string">"return"</span>)) &#123;</div><div class="line">        add(t-&gt;children,ReturnStm());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isID()) &#123;</div><div class="line">        add(t-&gt;children,MatchID());</div><div class="line">        add(t-&gt;children,AssCall());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">delete</span> t;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">AssCall</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(LSQUBRACK)||isSYM(POINT)||isSYM(ASSI)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"AssCall"</span>);</div><div class="line">        add(t-&gt;children,AssignmentRest());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(LBRACK)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"AssCall"</span>);</div><div class="line">        add(t-&gt;children,CallStmRest());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"ass call error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">AssignmentRest</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"AssignmentRest"</span>);</div><div class="line">    <span class="keyword">if</span>(isSYM(LSQUBRACK)||isSYM(POINT)) &#123;</div><div class="line">        add(t-&gt;children,VariMore());</div><div class="line">    &#125;</div><div class="line">    add(t-&gt;children,MatchSYM(ASSI));</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ConditionalStm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ConditionalStm"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"if"</span>));</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    <span class="keyword">if</span>(isSYM(LT))add(t-&gt;children,MatchSYM(LT));</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(isSYM(EQU))add(t-&gt;children,MatchSYM(EQU));</div><div class="line">    <span class="keyword">else</span> syntaxError(<span class="string">"condition error\n"</span>);</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"then"</span>));</div><div class="line">    add(t-&gt;children,StmList());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"else"</span>));</div><div class="line">    add(t-&gt;children,StmList());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"fi"</span>));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">LoopStm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"LoopStm"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"while"</span>));</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    <span class="keyword">if</span>(isSYM(LT))add(t-&gt;children,MatchSYM(LT));</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(isSYM(EQU))add(t-&gt;children,MatchSYM(EQU));</div><div class="line">    <span class="keyword">else</span> syntaxError(<span class="string">"condition error\n"</span>);</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"do"</span>));</div><div class="line">    add(t-&gt;children,StmList());</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"endwh"</span>));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">InputStm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"InputStm"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"read"</span>));</div><div class="line">    add(t-&gt;children,MatchSYM(LBRACK));</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,MatchSYM(RBRACK));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">OutputStm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"OutputStm"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"write"</span>));</div><div class="line">    add(t-&gt;children,MatchSYM(LBRACK));</div><div class="line">    add(t-&gt;children,Exp());</div><div class="line">    add(t-&gt;children,MatchSYM(RBRACK));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ReturnStm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"ReturnStm"</span>);</div><div class="line">    add(t-&gt;children,MatchRES(<span class="string">"return"</span>));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">CallStmRest</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"CallStmRest"</span>);</div><div class="line">    add(t-&gt;children,MatchSYM(LBRACK));</div><div class="line">    add(t-&gt;children,ActParamList());</div><div class="line">    add(t-&gt;children,MatchSYM(RBRACK));</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ActParamList</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(LBRACK)||isNUM()||isID()) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"ActParamList"</span>);</div><div class="line">        add(t-&gt;children,Exp());</div><div class="line">        add(t-&gt;children,ActParamMore());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">ActParamMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(COM)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"ActParamMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(COM));</div><div class="line">        add(t-&gt;children,ActParamList());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Exp</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Exp"</span>);</div><div class="line">    add(t-&gt;children,Term());</div><div class="line">    add(t-&gt;children,OtherTerm());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">OtherTerm</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(PLUS)||isSYM(SUB)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"OtherTerm"</span>);</div><div class="line">        add(t-&gt;children,AddOp());</div><div class="line">        add(t-&gt;children,Exp());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Term</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Term"</span>);</div><div class="line">    add(t-&gt;children,Factor());</div><div class="line">    add(t-&gt;children,OtherFactor());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">OtherFactor</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(MUL)||isSYM(DIV)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"OtherFactor"</span>);</div><div class="line">        add(t-&gt;children,MultOp());</div><div class="line">        add(t-&gt;children,Term());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Factor</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Factor"</span>);</div><div class="line">    <span class="keyword">if</span>(isNUM()) &#123;</div><div class="line">        add(t-&gt;children,MatchNUM());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSTR()) &#123;</div><div class="line">        add(t-&gt;children,MatchSTR());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(LBRACK)) &#123;</div><div class="line">        add(t-&gt;children,MatchSYM(LBRACK));</div><div class="line">        add(t-&gt;children,Exp());</div><div class="line">        add(t-&gt;children,MatchSYM(RBRACK));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isID()) &#123;</div><div class="line">        add(t-&gt;children,Variable());</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">delete</span> t;</div><div class="line">    syntaxError(<span class="string">"factor error\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Variable</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"Variable"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,VariMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">VariMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(LSQUBRACK)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"VariMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(LSQUBRACK));</div><div class="line">        add(t-&gt;children,Exp());</div><div class="line">        add(t-&gt;children,MatchSYM(RSQUBRACK));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(POINT)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"VariMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(POINT));</div><div class="line">        add(t-&gt;children,FieldVar());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FieldVar</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node* t=<span class="keyword">new</span> Node(<span class="string">"FieldVar"</span>);</div><div class="line">    add(t-&gt;children,MatchID());</div><div class="line">    add(t-&gt;children,FieldVarMore());</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">FieldVarMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(LSQUBRACK)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"FieldVarMore"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(LSQUBRACK));</div><div class="line">        add(t-&gt;children,Exp());</div><div class="line">        add(t-&gt;children,MatchSYM(RSQUBRACK));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">CmpOp</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(LT)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"CmpOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(LT));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(EQU)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"CmpOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(EQU));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"cmpop error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">AddOp</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(PLUS)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"AddOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(PLUS));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(SUB)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"AddOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(SUB));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"cmpop error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">MultOp</span><span class="params">()</span> </span>&#123;</div><div class="line">    Node*t=<span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(isSYM(MUL)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"MultOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(MUL));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(isSYM(DIV)) &#123;</div><div class="line">        t=<span class="keyword">new</span> Node(<span class="string">"MultOp"</span>);</div><div class="line">        add(t-&gt;children,MatchSYM(DIV));</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line">    &#125;</div><div class="line">    syntaxError(<span class="string">"cmpop error\n"</span>);</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">&#125;</div><div class="line"><span class="function">Node* <span class="title">Parse</span><span class="params">()</span> </span>&#123;</div><div class="line">    num_of_lines=<span class="number">1</span>;</div><div class="line">    Node* root=Program();</div><div class="line">    <span class="keyword">return</span> root;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_tree</span><span class="params">(Node* root,<span class="keyword">int</span> depth,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;* v,<span class="keyword">bool</span> islast)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(root==<span class="literal">NULL</span>)<span class="keyword">return</span> ;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;depth; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(v-&gt;at(i)==<span class="number">1</span>)<span class="built_in">printf</span>(<span class="string">" │"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"  "</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(islast) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">" └─%s"</span>,root-&gt;desc);</div><div class="line">        v-&gt;at(depth)=<span class="number">0</span>;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" ├─%s"</span>,root-&gt;desc);</div><div class="line">    <span class="keyword">if</span>(depth+<span class="number">1</span>==(<span class="keyword">int</span>)v-&gt;size())v-&gt;push_back(<span class="number">1</span>);</div><div class="line">    v-&gt;at(depth+<span class="number">1</span>)=<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> len=root-&gt;children.size();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(i==len<span class="number">-1</span>)show_tree(root-&gt;children.at(i),depth+<span class="number">1</span>,v,<span class="literal">true</span>);</div><div class="line">        <span class="keyword">else</span> show_tree(root-&gt;children.at(i),depth+<span class="number">1</span>,v,<span class="literal">false</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    tokens=<span class="keyword">new</span> <span class="built_in">vector</span>&lt;Token&gt;();</div><div class="line">    getTokenlist(<span class="string">"cs1.txt"</span>);</div><div class="line">    save_Token_list(<span class="string">"tokens.txt"</span>);</div><div class="line">    <span class="comment">//打印显示</span></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"TOKENS:\n\n"</span>);</div><div class="line">    show_Token_list();</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n\n\n\n语法树:\n\n"</span>);</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;* v=<span class="keyword">new</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</div><div class="line">    v-&gt;push_back(<span class="number">0</span>);</div><div class="line">    show_tree(Parse(),<span class="number">0</span>,v,<span class="literal">true</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>cs1.txt<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">&#123;冒泡排序&#125;</div><div class="line">&#123;输入m,表示要排序的数的个数；接着输入m个整数；</div><div class="line"> 输出从小到大排序后的结果&#125;</div><div class="line"></div><div class="line">program  p</div><div class="line">var  <span class="built_in">integer</span>  i,j,num;</div><div class="line">      array[1..20] of  <span class="built_in">integer</span> a;</div><div class="line"></div><div class="line">procedure  q(<span class="built_in">integer</span> num);</div><div class="line">var  <span class="built_in">integer</span> i,j,k;</div><div class="line">     <span class="built_in">integer</span> t;</div><div class="line">begin</div><div class="line">  i:=<span class="string">'lklklk'</span>;</div><div class="line">  j:=1;</div><div class="line">  <span class="keyword">while</span> i &lt; num <span class="keyword">do</span></div><div class="line">     j:=num-i+1;</div><div class="line">     k:=1;</div><div class="line">     <span class="keyword">while</span> k&lt;j  <span class="keyword">do</span></div><div class="line">         <span class="keyword">if</span> a[k+1] &lt; a[k]</div><div class="line">         <span class="keyword">then</span>  t:=a[k];</div><div class="line">           a[k]:=a[k+1];</div><div class="line">           a[k+1]:=t</div><div class="line">         <span class="keyword">else</span>  t:=0</div><div class="line">         <span class="keyword">fi</span>;</div><div class="line">     k:=k+1</div><div class="line">     endwh;</div><div class="line">  i:=i+1</div><div class="line">  endwh</div><div class="line">end</div><div class="line"></div><div class="line">begin</div><div class="line">   <span class="built_in">read</span>(num);</div><div class="line">   i:=1;</div><div class="line">   <span class="keyword">while</span> i&lt;(num+1)  <span class="keyword">do</span></div><div class="line">     <span class="built_in">read</span>(j);</div><div class="line">     a[i]:=j;</div><div class="line">     i:=i+1</div><div class="line">   endwh;</div><div class="line">   q(num);</div><div class="line">   i:=1;</div><div class="line">   <span class="keyword">while</span>  i&lt;(num+1) <span class="keyword">do</span></div><div class="line">       write(a[i]);</div><div class="line">       i:=i+1</div><div class="line">   endwh</div><div class="line">end.</div></pre></td></tr></table></figure></p>
<ul>
<li>代码写于大三下6月份，编译原理课程设计</li>
<li>随笔写于2016.7.13</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://maxuewei2.git.io/2016/07/13/简单的词法分析和语法分析/" data-id="civ098f7d001j0mbcp06l9348" class="article-share-link">分享到</a><div class="tags"><a href="/tags/算法/">算法</a><a href="/tags/编译/">编译</a></div><div class="post-nav"><a href="/2016/09/11/CCF记录/" class="pre">CCF考试</a><a href="/2016/07/03/ChatRoom/" class="next">聊天室（Java实现）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://maxuewei2.git.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/网络编程/" style="font-size: 15px;">网络编程</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/GUI/" style="font-size: 15px;">GUI</a> <a href="/tags/小游戏/" style="font-size: 15px;">小游戏</a> <a href="/tags/记录/" style="font-size: 15px;">记录</a> <a href="/tags/Win32/" style="font-size: 15px;">Win32</a> <a href="/tags/小工具/" style="font-size: 15px;">小工具</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/图形库/" style="font-size: 15px;">图形库</a> <a href="/tags/编译/" style="font-size: 15px;">编译</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/10/28/FirstPost/">开始使用GitHub Pages</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/22/近期学到的/">近期学到的</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/21/五子棋/">五子棋估值算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/重定向/">重定向</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/11/CCF记录/">CCF考试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/13/简单的词法分析和语法分析/">简单的词法分析和语法分析（C++实现，CodeBlocks+GCC编译）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/ChatRoom/">聊天室（Java实现）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/08/俄罗斯C++/">俄罗斯方块（Win32实现，Codeblocks+GCC编译）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/08/迷宫/">Java迷宫游戏</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/29/读文件错误/">读文件错误</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">maxuewei2.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>